 <!-- HOME start-->
<section class="section-hero overlay inner-page bg-image" style="background-image: url('/images/hero_1.jpg')"
         id="home-section">
    <div class="container">
        <div class="row">
            <div class="col-md-7">
                <h1 class="text-white font-weight-bold">註冊會員</h1>

            </div>
        </div>
    </div>
</section>
<!-- home end -->

<section class="site-section block__18514 " id="next-section">
    <div class="container h-100">
        <div class="row" id="appVue">
            <!-- Below is sidebar -->
            <div class="col-xs-12 col-md-10 col-lg-4">
                <nav class="navbar navbar-expand-lg navbar-light pl-lg-5 py-0">
                    <!-- <a class="navbar-brand" href="#">Liya rescue</a> -->
                    <button class="navbar-toggler mb-2" type="button" data-toggle="collapse"
                            data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                            aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarSupportedContent">
                        <ul class="navbar-nav mr-auto flex-column">
                            <li class="nav-item px-1 mx-1" v-for="item in advertiseArray">
                                <div class="head mt-4"></div>
                                <a class="change" :href="'https://localhost:7158/Home/courseDetail?id=' + item.courseId">
                                    <div class="border p-4 box mb-6 h-auto">
                                        <ul class="list-unstyled block__47528 ">
                                            <li><span class="active h2">{{item.courseName}}</span></li>
                                            <figure class="w-100">
                                                <img src="https://picsum.photos/100/100/?random=10" class="float-left mr-3">
                                                <figcaption>
                                                    {{item.courseIntro}}
                                                </figcaption>
                                            </figure>
                                        </ul>
                                    </div>
                                </a>
                            </li>
                        </ul>
                    </div>
                    <!-- </div> -->
                </nav>
            </div>

            <!-- Nav tabs -->
            <div class="col-lg-8 mt-lg-0 mt-5  mx-0 box context p-4 h-75">
                <ul class="nav nav-tabs row" id="myTab" role="tablist">
                    <li class="nav-item col-6 px-0 " role="presentation">
                        <a class="nav-link active text-center w-100 border-bottom-0" id="candidate-tab" data-toggle="tab" href="#candidate" role="tab" data-bs-target="#candidate" aria-selected="true">求職</a>
                    </li>
                    <li class="nav-item  col-6 px-0 " role="presentation">
                        <a class="nav-link text-center w-100 border-bottom-0" id="enterprise-tab" data-toggle="tab" href="#enterprise" role="tab" data-bs-target="#enterprise" aria-selected="true">徵才</a>
                    </li>
                </ul>


                <div class="tab-content">
                    <!-- Above is sidebar -->
                    <!-- 求職端 -->

                    <div class="tab-pane fade show active" id="candidate" role="tabpanel">
         
                            <h2 class="font-weight-bolder py-3">加入會員</h2>
                            <div class="row form-group">

                                <div class="col-md-12 mb-3 mb-md-0">
                                    <label class="text-body h5" for="fname">身分證號碼</label>
                                    <input type="text" class="form-control col-md-7 col-12" placeholder="請輸入身分證字號，例 : S123456789" v-model="IdCard" autocomplete="off">
                                </div>

                                <div class="col-md-12 mb-3 mb-md-0 mt-3">
                                    <label class="text-body h5" for="fname">姓名</label>
                                    <input type="text" class="form-control col-md-7 col-12" placeholder="請輸入姓名，例 : 王小明" v-model="Name" autocomplete="off">
                                </div>
                                <div class="col-md-12 mb-3 mb-md-0 mt-3">
                                    <label class="text-body h5" for="fname">帳號</label>
                                    <input type="text" class="form-control col-md-7 col-12" placeholder="請輸入帳號" v-model="Account" autocomplete="off">
                                </div>
                                <div class="col-md-12 mb-3 mb-md-0 mt-3">
                                    <label class="text-body h5" for="fname">密碼</label>
                                    <input type="text" class="form-control col-md-7 col-12"
                                           placeholder="密碼需由6-20個英文字母或數字組成" v-model="Password" autocomplete="off">
                                </div>
                                <div class="col-md-12 mb-3 mb-md-0 mt-3">
                                    <label class="text-body h5" for="fname">確認密碼</label>
                                    <input type="password" class="form-control col-md-7 col-12" v-model="CheckPassword" placeholder="請確認密碼" autocomplete="off">

                                </div>

                                <div class="col-md-12 mb-3 mb-md-0 mt-3">
                                    <label class="text-body h5" for="fname">聯絡信箱</label>
                                    <input type="text" class="form-control col-md-7 col-12"
                                           placeholder="例:example@member.com" v-model="Email" autocomplete="off">
                                </div>
                                <div class="col-md-12 mb-3 mb-md-0 mt-3">
                                    <label class="text-body h5" for="fname">聯絡電話</label>
                                    <input type="text" class="form-control col-md-7 col-12" placeholder="例:0988123456" v-model="Phone" autocomplete="off">
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12 d-flex justify-content-end">
                                    <button class="btn px-4 slide-button m-2 w-25" @@click="Set()">清除</button>

                                    <button class="btn px-4 slide-button m-2 w-25" @@click="Signup">註冊 </button>

                                </div>
                            </div>
         
                    </div>

                    <!-- 徵才端-->

                    <div class="tab-pane fade" id="enterprise" role="tabpanel">
               
                            <h2 class="font-weight-bolder py-3">加入會員</h2>
                            <div class="row form-group">
                                <div class="col-md-12 mb-3 mb-md-0">
                                    <label class="text-body h5" for="fname">統一編號</label>
                                    <input type="text" class="form-control col-md-7 col-12" placeholder="請輸入統一編號，例 : 52024101" v-model="EnpUniformNumbers" autocomplete="off">
                                </div>
                                <div class="col-md-12 mb-3 mb-md-0 mt-3">
                                    <label class="text-body h5" for="fname">公司名稱</label>
                                    <input type="text" class="form-control col-md-7 col-12" placeholder="請輸入營業登記名稱" v-model="EnpCompanyName" autocomplete="off">
                                </div>
                                <div class="col-md-12 mb-3 mb-md-0 mt-3">
                                    <label class="text-body h5" for="fname">地址</label>
                                    <input type="text" class="form-control col-md-7 col-12" placeholder="請輸入營業地址" v-model="EnpAddress" autocomplete="off">
                                </div>
                                <div class="col-md-12 mb-3 mb-md-0 mt-3">
                                    <label class="text-body h5" for="fname">產業類別</label>
                                </div>
                                <div class="w-75 ml-3 h-100">
                                    <select name="" id="" class="w-75 h5 rounded border text-body" v-model="EnpCategory">
                                        <option value="hurr" class="h5" selected disabled>
                                            請選擇產業類別
                                        </option>
                                        <option value="服務業" class="h5  text-body"> 服務業</option>
                                        @*<option value="1" class="h5  text-body"> 商業</option>*@
                                        <option value="科技業" class="h5  text-body"> 科技業</option>
                                        @* <option value="3" class="h5  text-body"> 製造業</option>
                                        <option value="4" class="h5  text-body"> 法律保險</option>*@
                                        <option value="文藝產業" class="h5  text-body"> 文藝產業</option>
                                        @* <option value="6" class="h5  text-body"> 餐飲業</option>
                                        <option value="7" class="h5  text-body"> 農林漁牧</option>*@
                                    </select>
                                </div>
                                <div class="col-md-12 mb-3 mb-md-0 mt-3">
                                    <label class="text-body h5" for="fname">負責人</label>
                                    <input type="text" class="form-control col-md-7 col-12" placeholder="請輸入負責人姓名" v-model="EnpName" autocomplete="off">
                                </div>
                                <div class="col-md-12 mb-3 mb-md-0 mt-3">
                                    <label class="text-body h5" for="fname">聯絡人信箱</label>
                                    <input type="email" class="form-control col-md-7 col-12"
                                           placeholder="例:example@member.com" v-model="EnpEmail" >
                                </div>
                                <div class="col-md-12 mb-3 mb-md-0 mt-3">
                                    <label class="text-body h5" for="fname">聯絡人電話</label>
                                    <input type="text" maxlength="10" class="form-control col-md-7 col-12" placeholder="例:0988123456" v-model="EnpPhone" autocomplete="off">
                                </div>
                                <div class="col-md-12 mb-3 mb-md-0 mt-3">
                                    <label class="text-body h5" for="fname">帳號</label>
                                    <input type="text" class="form-control col-md-7 col-12" placeholder="請輸入帳號" v-model="EnpAccount" autocomplete="off">
                                </div>
                                <div class="col-md-12 mb-3 mb-md-0 mt-3">
                                    <label class="text-body h5" for="fname">密碼</label>
                                    <input type="text" class="form-control col-md-7 col-12"
                                           placeholder="密碼需由6-20個英文字母或數字組成" v-model="EnpPassword" autocomplete="off">
                                </div>
                                <div class="col-md-12 mb-3 mb-md-0 mt-3">
                                    <label class="text-body h5" for="fname">確認密碼</label>
                                    <input type="Password" class="form-control col-md-7 col-12" placeholder="請確認密碼" autocomplete="off">

                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12 d-flex justify-content-end">
                                    <button class="btn px-4 slide-button m-2 w-25" >清除</button>

                                    <button class="btn px-4 slide-button m-2 w-25" @@click="EmpSignup">註冊 </button>

                                </div>
                            </div>
              

                    </div>
                </div>

            </div>
        </div>
    </div>
    </div>
</section>



@section Scripts{

    <script src="https://cdn.jsdelivr.net/npm/vue@2.7.14/dist/vue.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.2.2/axios.min.js"></script>
    <script>
        const webApi = "https://localhost:7240"
        const appVue = new Vue({
            el: "#appVue",
            name: "appVue",
            data: {

                //求職端
                Id: null,
                IdCard: null,
                Name: null,
                Account: null,
                Password: null,
                Email: null,
                Phone: null,
                CheckPassword: null,

                //徵才端
                EnpId: null,
                EnpUniformNumbers: null,
                EnpCompanyName: null,
                EnpAddress: null,
                EnpCategory: null,
                EnpName: null,
                EnpAccount: null,
                EnpPassword: null,
                EnpEmail: null,
                EnpPhone: null,

                advertiseArray: [],
            },
            mounted: function () {
                let _this = this;
                _this.advertise();
            },
            methods: {
                Signup: function () {
                    let _this = this;
                    let inf = {};
                    inf.CandidateId = 0;
                    inf.IdCard = _this.IdCard;
                    inf.Name = _this.Name;
                    inf.Account = _this.Account;
                    inf.Password = _this.Password;
                    inf.Email = _this.Email;
                    inf.Cellphone = _this.Phone;
                    axios.post(`${webApi}/api/Candidates`, inf)
                        .then(response => {
                            if (response.data == "此帳號已註冊") {
                                alert(response.data);
                            }
                            else {
                                window.location = "/Home/memberLogin";
                            }

                        })
                        .catch(err => console.log(err))
                        .finally(console.log('完成'))
                },
                EmpSignup: function () {
                    let _this = this;
                    let inf = {};

                    inf.EnterpriseId = 0;
                    inf.UniformNumbers = _this.EnpUniformNumbers;
                    inf.CompanyName = _this.EnpCompanyName;
                    inf.Address = _this.EnpAddress;
                    inf.Category = _this.EnpCategory;
                    inf.Principal = _this.EnpName;
                    inf.Account = _this.EnpAccount;
                    inf.Password = _this.EnpPassword;
                    inf.Email = _this.EnpEmail;
                    inf.ContactPhone = _this.EmpPhone;

                    axios.post(`${webApi}/api/Enterprises`, inf)
                        .then(response => {

                            if (response.data == "此帳號已登入") {
                                alert(response.data);
                            }
                            else {
                                window.location = "/Home/memberLogin";
                            }

                        })
                        .catch(err => console.log(err))
                        .finally(console.log('完成'))
                },
                advertise: function () {
                    let _this = this;
                    let j;
                    let arr = [];
                    sessionStorage.getItem("Id") ? j = 1 : j = 2;
                    axios.get(`${webApi}/api/Courses`)
                        .then(res => {
                            for (i = 0; i < j; i++) {
                                let item = {}
                                item = res.data[_this.random(res.data.length)]
                                item.courseIntro = item.courseIntro.substr(0, 80) + "..."
                                arr.push(item)
                            }
                            _this.advertiseArray = arr
                            console.log(_this.advertiseArray)
                        })
                },
                random(max) {
                    return Math.floor(Math.random() * max);
                },
                Set: function () {
                    let _this = this;

                    _this.IdCard =" S104326216";
                    _this.Name = "蔡億霖";
                    _this.Account = "594310";
                    _this.Password = "Zxc123";
                    _this.Email = "zxc1545414453@gmail.com";
                    _this.Phone = "0988123456";
                    _this.CheckPassword = "Zxc123";
                }
            }
        })

    </script>
    }


