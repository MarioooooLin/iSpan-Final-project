    <!-- HOME start-->
<div id="appVue">
    <section class="section-hero overlay inner-page bg-image " style="background-image: url('/images/hero_1.jpg');"
             id="home-section">
        <div class="container">
            <div class="row mt-1 job-row d-flex justify-content-center">
                <div class="col-12 col-lg-5 col-md-6 col-sm-6 text-center">
                    <input type="text" class="form-control">
                </div>
                <div class="col-12 col-lg-1 col-md-1 col-sm-4 mr-lg-5 d-flex">
                    <a href="#">
                        <button class="btn btn-primary"><i class="fa-solid fa-magnifying-glass ml-4 mr-4"></i></button>
                    </a>
                </div>
                <div class="wrapper col-12 col-lg-3 d-flex col-md-6 justify-content-center text-center">
                    <input type="radio" name="select" id="option-1" checked>
                    <input type="radio" name="select" id="option-2">
                    <label for="option-1" class="option option-1">
                        <div class="dot"></div>
                        <span>職缺</span>
                    </label>
                    <label for="option-2" class="option option-2">
                        <div class="dot"></div>
                        <span>公司</span>
                    </label>
                </div>
            </div>
            <div class="row mt-1 job-row2 d-flex justify-content-center">
                <div class="col-lg-3 col-md-6 ">
                    <div class="form-group">
                        <select name="cause-category" class="form-control cause-category" v-model="selectedCategory">
                            <option value="">行業別</option>
                            <option value="服務">服務</option>
                            <option value="科技">科技</option>
                            <option value="藝文">藝文</option>
                        </select>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6">
                    <div class="form-group">
                        <select name="cause-category" class="form-control cause-category" v-model="selectedArea">
                            <option value="">地區</option>
                            <option value="台北">台北</option>
                            <option value="新北">新北</option>
                            <option value="高雄">高雄</option>
                        </select>
                    </div>
                </div>
                <div class="col-lg-1 col-md-1 col-sm-2">
                    <div>
                        <a href="#">
                            <p class="fa-solid x-mark">×</p>
                        </a>
                    </div>
                </div>
                <div class="col-lg-2 col-md-3 mt-lg-3 mt-md-2 text-sm-right">
                    <div>
                        <span class="fw-bold text-white">
                            <a asp-controller="Home" asp-action="memberDetail" class="text-decoration-none text-white">
                                修改會員資料<i class="fa-solid fa-chevron-right"></i>
                            </a>
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- home end -->

    <section class="site-section">
        <div class="container">
            <div class="row align-items-center mb-5 context">
                <div class="col-lg-8 mb-4 mb-lg-0">
                    <div class="d-md-flex d-flex-column align-items-center ">
                        <figure class="figure p-2 d-inline-block mr-3 rounded col-12 col-md-2">
                            <img :src="datas.img" alt="Image">
                        </figure>
                        <div class="job-context mt-3 col-12 col-md-10 pl-md-5">
                            <h3 class="slide-h3 active">{{datas.workName}}</h3>
                            <h4 class="ml-1d-flex row mt-2 ml-1">{{datas.companyName}}</h4>
                            <div class="row">
                                <div class="pr-5 col-lg-4 col-md-6 col-12">
                                    <i class="fa-regular fa-clock"></i><span class="fs-6 ml-2">&nbsp;幾小時前更新</span>
                                </div>
                                <div class="col-lg-4 col-md-6 col-12">
                                    <i class="fa-solid fa-quote-left"></i><span class="fs-6 ml-2">&nbsp;{{datas.category}}</span>
                                </div>
                            </div>
                            <div class="mt-lg-5 mt-3 mb-4">
                                <h2>{{salary}}</h2>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4">
                    <div class="right col-12 mt-3 ml-2 ml-lg-o ml-sm-4 xs-row">
                        <div class="py-1 d-lg-flex d-inline px-lg-0 px-sm-2">
                            <i class="fa-solid fa-user"></i><span class="fs-6 ml-2">&nbsp;全職</span>
                        </div>
                        <div class="py-1 d-lg-flex d-inline px-lg-0 px-sm-2">
                            <i class="fa-solid fa-location-dot"></i><span class="fs-6 ml-2">&nbsp;{{datas.workPlace}}</span>
                        </div>
                        <div class="py-1 d-lg-flex d-inline px-lg-0 px-sm-2">
                            <i class="fa-solid fa-briefcase"></i><span class="fs-6 ml-2">&nbsp;{{seniority}}</span>
                        </div>
                    </div>
                    <div class="row justify-content-lg-start ml-lg-4 justify-content-end mr-5 mb-3">
                        <div class=" my-2">
                            <button class="btn btn-dark mx-1 btn-JS" @@click="deposition">
                                <i class="fa-regular fa-bookmark"></i><span class="ml-2"><span class="spanposi">儲存</span></span>
                            </button>
                        </div>
                        <div class="my-2">
                            <button class="btn btn-primary mx-1 btn-JS" @@click="post">
                                <i class="fa-solid fa-arrow-up-right-from-square"></i>
                                <span class="ml-2">立即應徵</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row justify-content-center">
                <div class="col-lg-7">
                    <div class="mb-5 mt-5" v-if="workContentDatas.length > 0">
                        <h3 class="h5 d-flex align-items-center mb-4 text-primary">
                            <i class="icon-align-left mr-3"></i>
                            <span>工作內容</span>
                        </h3>
                        <ul class="list-unstyled m-0 p-0" v-for="i in workContentDatas">
                            <li class="d-flex align-items-start mb-2">
                                <!--<i class="icon-check_circle mr-2 text-muted"></i>-->
                                <span>{{i}}</span>
                            </li>
                        </ul>
                    </div>

                    <div class="mb-5" v-if="workReqireDatas.length > 0">
                        <h3 class="h5 d-flex align-items-center mb-4 text-primary">
                            <i class="icon-book mr-3"></i>
                            <span>條件要求</span>
                        </h3>
                        <ul class="list-unstyled m-0 p-0" v-for="i in workReqireDatas">
                            <li class="d-flex align-items-start mb-2">
                                <!--<span class="icon-check_circle mr-2 text-muted"></span>-->
                                <span>{{i}}</span>
                            </li>
                        </ul>
                    </div>
                    <!--<div class="mb-5">
                        <h3 class="h5 d-flex align-items-center mb-4 text-primary">
                            <i class="icon-turned_in mr-3"></i>
                            <span>公司福利</span>
                        </h3>
                        <ul class="list-unstyled m-0 p-0">
                            <li class="d-flex align-items-start mb-2">
                                <span class="icon-check_circle mr-2 text-muted"></span><span>Necessitatibus quibusdam facilis</span>
                            </li>
                            <li class="d-flex align-items-start mb-2">
                                <span class="icon-check_circle mr-2 text-muted"></span><span>
                                    Velit unde aliquam et voluptas reiciendis non
                                    sapiente labore
                                </span>
                            </li>
                            <li class="d-flex align-items-start mb-2">
                                <span class="icon-check_circle mr-2 text-muted"></span><span>Commodi quae ipsum quas est itaque</span>
                            </li>
                            <li class="d-flex align-items-start mb-2">
                                <span class="icon-check_circle mr-2 text-muted"></span><span>
                                    Lorem ipsum dolor sit amet, consectetur
                                    adipisicing elit
                                </span>
                            </li>
                            <li class="d-flex align-items-start mb-2">
                                <span class="icon-check_circle mr-2 text-muted"></span><span>
                                    Deleniti asperiores blanditiis nihil quia
                                    officiis dolor
                                </span>
                            </li>
                        </ul>
                    </div>-->
                    <!--<div class="mb-5">
                        <h3 class="h5 d-flex align-items-center mb-4 text-primary"><i class="fa-solid fa-phone mr-3"></i>聯絡方式</h3>
                        <ul class="list-unstyled m-0 p-0">
                            <li class="d-flex align-items-start mb-2">
                                <span class="icon-check_circle mr-2 text-muted"></span><span>Necessitatibus quibusdam facilis</span>
                            </li>
                            <li class="d-flex align-items-start mb-2">
                                <span class="icon-check_circle mr-2 text-muted"></span><span>
                                    Velit unde aliquam et voluptas reiciendis non
                                    sapiente labore
                                </span>
                            </li>
                            <li class="d-flex align-items-start mb-2">
                                <span class="icon-check_circle mr-2 text-muted"></span><span>Commodi quae ipsum quas est itaque</span>
                            </li>
                            <li class="d-flex align-items-start mb-2">
                                <span class="icon-check_circle mr-2 text-muted"></span><span>
                                    Lorem ipsum dolor sit amet, consectetur
                                    adipisicing elit
                                </span>
                            </li>
                            <li class="d-flex align-items-start mb-2">
                                <span class="icon-check_circle mr-2 text-muted"></span><span>
                                    Deleniti asperiores blanditiis nihil quia
                                    officiis dolor
                                </span>
                            </li>
                        </ul>
                    </div>-->

                </div>
                <div class="col-lg-4">
                    <div class="bg-light p-3 border rounded mb-4">
                        <h3 class="text-primary  mt-3 h5 pl-3 mb-3 "><i class="fa-solid fa-building m"></i>&nbsp; 公司簡介</h3>
                        <ul class="list-unstyled pl-3 mb-0">
                            <!--<li class="mb-2"><strong class="text-black">Published on:</strong> April 14, 2019</li>-->
                            <li class="mb-2"><strong class="text-black">目前職缺: </strong>&nbsp; {{length}}</li>
                            <!--<li class="mb-2"><strong class="text-black">Employment Status:</strong> Full-time</li>-->
                            <li class="mb-2"><strong class="text-black">年資:</strong>&nbsp; {{seniority}}</li>
                            <li class="mb-2"><strong class="text-black">工作地點:</strong>&nbsp; {{datas.workPlace}}</li>
                            <li class="mb-2"><strong class="text-black">薪資:</strong>&nbsp; {{salary}}</li>
                            <li class="mb-2"><strong class="text-black">性別:</strong>&nbsp;不拘</li>
                            <!--<li class="mb-2"><strong class="text-black">Application Deadline:</strong> April 28, 2019</li>-->
                        </ul>
                    </div>

                    <div class="bg-light p-3 border rounded block-19999">
                        <h3 class="text-primary  mt-3 h5 pl-3 mb-3 ">Share</h3>
                        <div class="px-3">
                            <a href="#" class="pt-3 pb-3 pr-3 pl-0"><span class="icon-facebook"></span></a>
                            <a href="#" class="pt-3 pb-3 pr-3 pl-0"><span class="icon-twitter"></span></a>
                            <a href="#" class="pt-3 pb-3 pr-3 pl-0"><span class="icon-linkedin"></span></a>
                            <a href="#" class="pt-3 pb-3 pr-3 pl-0"><span class="icon-pinterest"></span></a>
                        </div>
                    </div>

                </div>

            </div>
            <div class="row mb-5 mt-5 justify-content-center">
                <div class="col-6 col-lg-4">
                    <a class="btn btn-block btn-dark btn-md" @@click="deposition">
                        <i class="fa-regular fa-bookmark mr-3"></i>
                        <span class="spanposi">儲存</span>
                    </a>
                </div>
                <div class="col-6 col-lg-4" @@click="post">
                    <a class="btn btn-block btn-primary btn-md">
                        <i class="fa-solid fa-arrow-up-right-from-square mr-3"></i>
                        <span>立即應徵</span>
                    </a>
                </div>
            </div>
        </div>
    </section>
</div>
@section Scripts{

    <script src="https://cdn.jsdelivr.net/npm/vue@2.7.14/dist/vue.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.2.2/axios.min.js"></script>
    <script>
        const webApi = "https://localhost:7240"
        const appVue = new Vue({
            el: "#appVue",
            name: "appVue",
            data: {
                datas: [],
                selectedCategory: "",
                selectedArea: "",
                length: 0,
                enterprise: 0,
                workContentDatas: [],
                workReqireDatas: []
            },
            mounted: function () {
                this.Vacancy();
            },
            methods: {
                Vacancy: function () {
                    let key = window.localStorage.getItem("vanId")
                    axios.get(`${webApi}/api/vacancies/${key}`)
                        .then(res => {
                            this.datas = res.data;
                            this.enterprise = res.data.enterpriseId;
                            let x = res.data.workContent.split('\r\n\r\n')
                            for (i = 0; i < x.length; i++) { this.workContentDatas[i] = x[i] }
                            x = res.data.workReqire.split('\r\n\r\n')
                            for (i = 0; i < x.length; i++) { this.workReqireDatas[i] = x[i] }
                            console.log(this.datas);
                        })
                        .catch(err => console.log(err))
                        .finally(console.log('完成'))
                },
                post: function () {
                    let candidateId = window.sessionStorage.getItem("Id")
                    if (!candidateId) {
                        alert('尚未登入 , 請先登入')
                        return false
                    }
                    let key = window.localStorage.getItem("vanId");
                    window.location = "/Home/jobApply";
                },
                deposition() {
                    let candidateId = window.sessionStorage.getItem("Id")
                    let vanId = window.localStorage.getItem("vanId")
                    if (!candidateId) {
                        alert('尚未登入 , 請先登入')
                        return false
                    }
                    axios.get(`${webApi}/api/Interests/${candidateId}`)
                        .then(res => {
                            let bool = false
                            if (res.data.length > 0) {
                                interestId = res.data[0].id // interest id
                                bool = true
                            }
                            if (bool) {
                                axios.delete(`${webApi}/api/Interests/${interestId}`)
                                    .then(res => {
                                        let x = document.querySelectorAll('span[class="spanposi"]')
                                        x[0].innerHTML = '儲存'
                                        x[1].innerHTML = '儲存'
                                    })
                                    .catch(err => console.log(err))
                            } else {
                                var postdata = {
                                    CandidateId: parseInt(window.sessionStorage.getItem("Id")),
                                    VacancyId: vanId,
                                    EnterpriseId: this.datas.enterpriseId
                                }
                                axios.post(`${webApi}/api/Interests`, postdata)
                                    .then(res => {
                                        let x = document.querySelectorAll('span[class="spanposi"]')
                                        x[0].innerHTML = '已儲存';
                                        x[1].innerHTML = '已儲存';
                                    })
                            }
                        })
                },
                //post() {
                //    let bool = confirm('是否送出')
                //    let id = window.localStorage.getItem("vanId")
                //    let candidateId = window.sessionStorage.getItem("Id")
                //    axios.get(`${webApi}/api/Interests/${candidateId}`)
                //        .then(res => {
                //            let vanid;
                //            for (i = 0; i < res.data.length; i++) {
                //                vanid = res.data[0].vacancyId
                //            }
                //            vanid == id ? alert('您已經應徵該職缺') : this.postInterests()
                //        })
                //    //console.log(this.txtMsg)方法裡第二行
                //    //this.txtMsg = '';
                //},
                //postInterests() {
                //    const postdata = {
                //        CandidateId: parseInt(window.sessionStorage.getItem("Id")),
                //        VacancyId: this.datas.vacancyId,
                //        EnterpriseId: this.datas.enterpriseId,
                //        InterestStatus: 1
                //    }
                //    axios.post(`${webApi}/api/Interests/filter`, postdata)
                //        .then(res => {
                //            alert('應徵成功')
                //        })
                //}
            },
            computed: {
                salary: function () {
                    return this.datas.salary + ' / 月';
                },
                seniority: function () {
                    if (this.datas.seniority > 0) {
                        return this.datas.seniority + ' 年';
                    } else {
                        return '不限年資';
                    }
                }
            },
            watch: {
                enterprise: {
                    handler(newval) {
                        axios.get(`${webApi}/api/Enterprises/` + newval)
                            .then(res => {
                                this.length = res.data.length + '個';
                            })
                    }
                },
            }

        })
    </script>
}